<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">


    <!--<bean class="net.javacrumbs.calc.server.CalcEndpoint"/>-->

    <bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
        <property name="interceptors">
            <list>
                <ref bean="wsServerSecurityInterceptor" />
            </list>
        </property>
    </bean>

    <bean id="wsServerSecurityInterceptor"   class="org.springframework.ws.soap.security.wss4j.Wss4jSecurityInterceptor">
         <!--Validation part-->
        <property name="validationActions" value="Signature"/>
        <property name="validationSignatureCrypto" ref="serverCrypto"/>
        <property name="validationDecryptionCrypto" ref="serverCrypto"/>
        <property name="validationCallbackHandler">
            <bean class="org.springframework.ws.soap.security.wss4j.callback.KeyStoreCallbackHandler">
                <property name="keyStore">
                    <bean class="org.springframework.ws.soap.security.support.KeyStoreFactoryBean">
                        <property name="password" value="testpass"/>
                    </bean>
                </property>
                <property name="privateKeyPassword" value="testpass"/>
            </bean>
        </property>
         <!--Sign the response-->
        <!--<property name="securementActions" value="Signature" />-->
        <!--<property name="securementUsername" value="server" />-->
        <!--<property name="securementPassword" value="" />-->
        <!--<property name="securementSignatureCrypto" ref="serverCrypto"/>-->
    </bean>

    <bean id="serverCrypto" class="org.springframework.ws.soap.security.wss4j.support.CryptoFactoryBean">
        <property name="keyStorePassword" value="testpass"/>
        <property name="keyStoreLocation" value="classpath:keystore.jks"/>
    </bean>
    <!--<bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">-->
        <!--<constructor-arg>-->
            <!--<bean  class="org.springframework.oxm.jaxb.Jaxb2Marshaller">-->
                <!--<property name="contextPath" value="net.javacrumbs.calc.model"/>-->
            <!--</bean>-->
        <!--</constructor-arg>-->
    <!--</bean>-->

    <!--<bean id="calc" class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">-->
        <!--<property name="schema">-->
            <!--<bean class="org.springframework.xml.xsd.SimpleXsdSchema">-->
                <!--<property name="xsd" value="classpath:xsd/calc.xsd" />-->
            <!--</bean>-->
        <!--</property>-->
        <!--<property name="portTypeName" value="Calc" />-->
        <!--<property name="locationUri" value="http://localhost:8080/simple-server-test/soap/calc.do" />-->
        <!--<property names="targetNamespace" value="http://javacrumbs.net/calc" />-->
    <!--</bean>-->
</beans>